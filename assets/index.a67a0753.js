import{z as v,a2 as k,aw as w}from"./index.6d302593.js";function S(e){const t=document.getElementById(e);return t?{width:t.offsetWidth,height:t.offsetHeight}:null}function T(e){return new Promise(t=>setTimeout(t,e))}const $={"-":"+",_:"/"},j={"+":"-","/":"_","=":""};var P={decodeFromUrl(e){return e.replace(/[-_.]/g,t=>$[t]),e=e+"===".slice((e.length+3)%4),atob(e)},decode(e){return atob(e)},encode(e){return btoa(e)},encodeToUrl(e){return e=btoa(e),e.replace(/[+/=]/g,t=>j[t])}};function g(e){return new Promise(t=>{const r=new FileReader;r.onloadend=()=>t(r.result),r.readAsDataURL(e)})}function O(e){return JSON.parse(JSON.stringify(e))}const i=function(e){let t;if(Array.isArray(e)){let r=[];for(const n of e)t=i(n),t!==null&&r.push(t);if(e.length!==0)return r}else if(typeof e=="object"&&e!==null){let r={};for(const n in e)t=i(e[n]),t!==null&&(r[n]=t);if(Object.keys(r).length!==0)return r}else return e===void 0?null:e;return null},p=function(e){if(Array.isArray(e))return e.map(t=>p(t));if(typeof e=="object"&&e!==null){let t={};for(const r in e)t[r]=p(e[r]);return t}else return e};function C(e){if(typeof e!="object")throw new Error("O object n\xE3o \xE9 v\xE1lido.");e=O(e);for(const t in e){const r=e[t];(r!==null||r!==void 0)&&(typeof r!="object"||(e[t]=C(r),r&&Object.keys(r).length>0))||(Array.isArray(e)?e.splice(t,1):delete e[t])}return e}function B({array:e,chave:t="id",campos:r,objetoOriginal:n}){const o={};for(const c of e||[]){let a;if(r){a={};for(const u of r){const s=Array.isArray(u)?u[0]:u,f=Array.isArray(u)?u[1]:u;a[f]=c[s]}}else a={...c},delete a[t];const l=c[t];o[l]=a}for(const c in n)o[c]||(o[c]=null);return o}function D({objetos:e,chave:t="id",campos:r}){const n=[];for(const o in e)if(o!==t){let c={[t]:o};if(r)for(const a of r){const l=Array.isArray(a)?a[0]:a,u=Array.isArray(a)?a[1]:a;c[u]=e[o][l]}else c={...c,...e[o]};n.push(c)}return n}function _(){return v.formatDate(Date.now())}const b=[null,void 0,"",0,!1],z=function(e,t){let r=[];const n=e.length>t.length?e.length:t.length;for(let o=0;o<n;o++){const c=m(e[o],t[o]);c&&(r[o]=c)}return r.length>0?r:null},I=function(e,t){let r={};e=e||{},t=t||{};const n=[...new Set([...Object.keys(e),...Object.keys(t)])];for(const o of n){const c=m(e[o],t[o]);c&&(r[o]=c)}return Object.keys(r).length>0?r:null},m=function(e,t){if(b.includes(e)){if(b.includes(t))return null}else if(Array.isArray(e)){if(Array.isArray(t))return z(e,t)}else if(typeof e=="object"&&typeof t=="object"&&t!==null)return I(e,t);if(e!==t){const r=i(e),n=i(t);if(r!==n)return{original:r,alterado:n}}return null},x="https://api.optiface.com.br";async function E(e,t){var n,o,c;let r;try{const a=new AbortController,{signal:l}=a,u=(n=t==null?void 0:t.timeout)!=null?n:3e4,s={method:"POST",headers:{"Content-Type":"application/json"},signal:l};if((o=t==null?void 0:t.requiresAuth)==null||o){const d=$utils.sessao.get(),A=(c=d==null?void 0:d.token)!=null?c:localStorage.getItem("OptTk");A&&(s.headers.Authorization=`Bearer ${A}`)}e&&(s.body=JSON.stringify(e)),r=setTimeout(()=>a.abort(),u);const f=await fetch(x,s);return f.ok?await f.json():{erro:"Erro inesperado"}}catch{return{erro:"Sem internet ou falha de comunica\xE7\xE3o"}}finally{clearTimeout(r)}}const y=k(null);let h=null;function F(){return $utils.clonar(h)}async function N(e){h=null,y.value=$utils.uuid();const{usuario:t,codigoAcesso:r}=e!=null?e:{},n=await $utils.api({funcao:"6EF94072-941B-4806-B5E2-B0D7C6024116",usuario:t,codigoAcesso:r},{requiresAuth:!(t&&r)});return n.token&&(localStorage.setItem("OptTk",n.token),h=$utils.clonar(n),y.value=$utils.uuid()),n}var U={changed:y,get:F,load:N};function J(){localStorage.removeItem("OptTk"),$router.push("/login")}function q(e,t){const r=document.createElement("script");r.src=e,r.onload=t,r.onerror=function(){console.error("Erro ao carregar o script:",e)},document.head.appendChild(r)}function M(e=0,t=2){const r=e<0?-1:1;return r*$lodash.round(r*e,t)}function R(e){return(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^ -}]|[<>"'@Â¨]/g," ").trim()}const V=function(){return w().toUpperCase()},H=function(){};var W=Object.freeze(Object.defineProperty({__proto__:null,api:E,sessao:U,logout:J,loadScript:q,uuid:V,tela:S,dormir:T,base64:P,blobToBase64:g,clonar:O,clonarCompactar:i,clonarV2:p,compactarObjeto:C,converterArrayParaObjeto:B,converterObjetoParraArray:D,dataAtual:_,diferenca:m,extenso:H,arredondar:M,removerCaracteresEspeciais:R},Symbol.toStringTag,{value:"Module"}));export{H as e,W as u};
